# VectorDB ì„±ëŠ¥ ìµœì í™” ê°€ì´ë“œ

## 1. RDB vs VectorDB ìµœì í™” ë¹„êµ

| ìµœì í™” ë‹¨ê³„           | RDB ìµœì í™” ë‚´ìš©                                           | VectorDB ìµœì í™” ë‚´ìš©                                               |
|-----------------------|---------------------------------------------------------|------------------------------------------------------------------|
| 1. ë°ì´í„° ëª¨ë¸ë§       | ìŠ¤í‚¤ë§ˆ ì„¤ê³„: ì •ê·œí™”/ë¹„ì •ê·œí™” ë° ë°ì´í„° íƒ€ì… ìµœì í™”             | ì„ë² ë”© í’ˆì§ˆ ê°œì„ : ì ì ˆí•œ ë”¥ëŸ¬ë‹ ì„ë² ë”© ëª¨ë¸ ë° ì „ì²˜ë¦¬ ì ìš©            |
| 2. ì¸ë±ìŠ¤ ì„¤ê³„        | B-tree, Hash ë“± ì¸ë±ìŠ¤ ìƒì„± ë° ë³µí•© ì¸ë±ìŠ¤ í™œìš©                 | HNSW, IVF ë“± ì í•©í•œ ë²¡í„° ì¸ë±ìŠ¤ êµ¬ì¡° ì„ íƒ ë° íŒŒë¼ë¯¸í„° ì¡°ì •            |
| 3. ì¿¼ë¦¬ íŠœë‹          | ì‹¤í–‰ ê³„íš ë¶„ì„, Join/Where ìµœì í™”, íŒŒí‹°ì…”ë‹ í™œìš©                | íƒìƒ‰ ê¹Šì´(ef_search, ef_construction), ë³‘ë ¬í™”, í•„í„° selectivity ì¡°ì •  |
| 4. ë©”íƒ€ë°ì´í„° í•„í„°ë§   | ì»¬ëŸ¼ ì¸ë±ì‹± í†µí•´ í•„í„° ì¡°ê±´ ìµœì í™”                             | í•„í„°ìš© ë©”íƒ€ë°ì´í„° ìŠ¤í‚¤ë§ˆ ì„¤ê³„, íš¨ìœ¨ì  í•„í„°ë§ ë° íŒŒí‹°ì…”ë‹ ì ìš©           |
| 5. ë°ì´í„° ì…ë ¥ ìµœì í™” | ë°°ì¹˜ ì²˜ë¦¬ ë° íŠ¸ëœì­ì…˜ ìµœì í™”                                 | ë²¡í„° ì‚½ì… ë°°ì¹˜ í¬ê¸° ì¡°ì ˆ, ë™ê¸°í™” ì£¼ê¸° ë° ë©”ëª¨ë¦¬ íŠœë‹                    |
| 6. í•˜ë“œì›¨ì–´ ì¡°ì •       | ë©”ëª¨ë¦¬, CPU, ë””ìŠ¤í¬ I/O í• ë‹¹ ë° ë³‘ë ¬ ì¿¼ë¦¬ í™œìš©                  | GPU ê°€ì† ê³ ë ¤, ìˆ˜í‰/ìˆ˜ì§ í™•ì¥, ë¶„ì‚° í™˜ê²½ êµ¬ì¶•                       |
| 7. ëª¨ë‹ˆí„°ë§ ë° íŠœë‹   | ì¿¼ë¦¬ ë¡œê·¸ ë¶„ì„, ì‹¤í–‰ ê³„íš ëª¨ë‹ˆí„°ë§ ë° ë°˜ë³µ ê°œì„                   | ê²€ìƒ‰ ë¡œê·¸ ë° ì¸ë±ìŠ¤ ìƒíƒœ ëª¨ë‹ˆí„°ë§, íŒŒë¼ë¯¸í„° ì¬ì¡°ì • ë° ì„±ëŠ¥ ê°œì„           |



### ìš”ì•½
- **RDB**: ì •í˜• ë°ì´í„°, íŠ¸ëœì­ì…˜, ì •í™•í•œ ê´€ê³„ ê¸°ë°˜ ë°ì´í„° ì²˜ë¦¬ì— ìµœì í™”
  - ìŠ¤í‚¤ë§ˆ ì„¤ê³„, ì¸ë±ìŠ¤ íŠœë‹, ì‹¤í–‰ ê³„íš ìµœì í™”ì— ì¤‘ì 
- **VectorDB**: ê³ ì°¨ì› ë²¡í„° ê¸°ë°˜ ìœ ì‚¬ë„ ê²€ìƒ‰ê³¼ ëŒ€ê·œëª¨ ë¹„ì •í˜• ë°ì´í„° ì²˜ë¦¬ì— ìµœì í™”
  - ì„ë² ë”© í’ˆì§ˆ, ANN ì¸ë±ìŠ¤ íŒŒë¼ë¯¸í„°, ë©”íƒ€ë°ì´í„° í•„í„°ë§, í•˜ë“œì›¨ì–´ ê°€ì† ë“± ìµœì í™”
- **í•µì‹¬**: ê° ë°ì´í„° íŠ¹ì„± ë° ì›Œí¬ë¡œë“œ ì¡°ê±´ì— ë”°ë¥¸ ë§ì¶¤í˜• íŠœë‹ê³¼ ëª¨ë‹ˆí„°ë§ì´ ì¤‘ìš”

---

## 2. VectorDB ì¢…ë¥˜ë³„ ê³ ê°€ìš©ì„± ë¹„êµ

| ê¸°ëŠ¥     | Chromadb                             | Pinecone                         | Qdrant                                      | Weaviate                              | Milvus                                   |
|----------|------------------------------------|---------------------------------|---------------------------------------------|--------------------------------------|-----------------------------------------|
| ìƒ¤ë”©     | ìë™ ìƒ¤ë”© ì§€ì›, ë¶„ì‚° ê°€ëŠ¥            | ì™„ì „ ê´€ë¦¬í˜•, ìë™ ìƒ¤ë”© í¬í•¨       | ì»¬ë ‰ì…˜ ë‹¨ìœ„ ìƒ¤ë”© ì§€ì •, í•´ì‹œ ê¸°ë°˜ ë¶„ì‚°        | ìë™ ìƒ¤ë”© ë° ë°ì´í„° ë¶„ë°° ì§€ì›          | ì»¬ë ‰ì…˜ ë‹¨ìœ„ ìƒ¤ë”©, í•´ì‹œ ê¸°ë°˜ ìƒ¤ë“œ ë¼ìš°íŒ…     |
| íŒŒí‹°ì…”ë‹ | ë©”íƒ€ë°ì´í„° ê¸°ë°˜ í•„í„°ë§ API ì§€ì›      | ë©”íƒ€ë°ì´í„° í•„í„°ë§ ë° ì¡°ê±´ë³„ ë¶„ë¦¬  | ë©”íƒ€ë°ì´í„° í•„í„°ë¡œ ë…¼ë¦¬ì  ë¶„ë¦¬                | í•„í„°ë§ ë° ìŠ¤í‚¤ë§ˆ ê¸°ë°˜ ì¡°ê±´ ë¶„í•         | ë²”ìœ„ ë° í•´ì‹œ íŒŒí‹°ì…”ë‹ ì˜µì…˜ ì§€ì›               |
| ìºì‹±     | ë‚´ë¶€ ë©”ëª¨ë¦¬ ë° SSD ìºì‹±             | ê²€ìƒ‰ ê²°ê³¼ ë° ì¸ë±ìŠ¤ ìºì‹± ìµœì í™”   | ë©”ëª¨ë¦¬ ë§µí•‘ ë° WAL(write-ahead logging) ê¸°ë°˜ ìºì‹œ ê´€ë¦¬ | ì¿¼ë¦¬ ìºì‹± ë° ë¹ ë¥¸ ë©”ëª¨ë¦¬ ì•¡ì„¸ìŠ¤          | CPU L3 ìºì‹œ ìµœì í™”, ì„¸ê·¸ë¨¼íŠ¸ë³„ ë³‘ë ¬ ì²˜ë¦¬       |
| ë³µì œ     | í´ëŸ¬ìŠ¤í„°ë‚´ ë°ì´í„° ë³µì œ ì§€ì›          | ë³µì œ ë° ê³ ê°€ìš©ì„± ìë™ ê´€ë¦¬          | ì»¬ë ‰ì…˜ë³„ ë³µì œ ê³„ìˆ˜ ì„¤ì •, ì¥ì• ë³µêµ¬ ì§€ì›        | í´ëŸ¬ìŠ¤í„° ë³µì œ ë° ë°ì´í„° ë™ê¸°í™” ì œê³µ      | ë¶„ì‚° í´ëŸ¬ìŠ¤í„° ë³µì œ ë° ì¥ì•  ë³µêµ¬ ì§€ì›            |


### íŠ¹ì§• ìš”ì•½
- **Chromadb & Pinecone**: ìë™í™” ìˆ˜ì¤€ì´ ë†’ì•„ ìš´ì˜ í¸ì˜ì„± ë›°ì–´ë‚¨, ì™„ì „ ê´€ë¦¬í˜• ì„œë¹„ìŠ¤
- **Qdrant**: ì»¬ë ‰ì…˜ ë‹¨ìœ„ ìƒ¤ë”©, ë©”íƒ€ë°ì´í„° ê¸°ë°˜ í•„í„°ë§, ìœ ì—°í•œ ë³µì œ êµ¬ì„±
- **Weaviate**: ìë™ ìƒ¤ë”©, ìŠ¤í‚¤ë§ˆ ê¸°ë°˜ íŒŒí‹°ì…”ë‹, ê³ ì† ì¿¼ë¦¬ ìºì‹±
- **Milvus**: ê³ ì„±ëŠ¥ CPU ìºì‹œ ìµœì í™”, ë²”ìœ„/í•´ì‹œ íŒŒí‹°ì…”ë‹, ê°•ë ¥í•œ ë¶„ì‚° í™˜ê²½ ì§€ì›

---

## 3. PostgreSQL pgvector ìµœì í™” ì‹¤ìŠµ

PostgreSQL `pgvector`ì˜ HNSW ì¸ë±ìŠ¤ ê¸°ë°˜ ë²¡í„° ê²€ìƒ‰ê³¼ ë©”íƒ€ë°ì´í„° í•„í„°ë§ì„ í•¨ê»˜ ì ìš©í•˜ëŠ” ìµœì í™” ë°©ë²•ì„ ë‹¤ë£¹ë‹ˆë‹¤.

**ì˜ˆì œ ì‹œë‚˜ë¦¬ì˜¤**: ì˜í™” ë°ì´í„°ë¥¼ `genre`ì™€ `release_year` ë©”íƒ€ë°ì´í„°ì™€ í•¨ê»˜ ì €ì¥í•˜ê³ , í•„í„° ì¡°ê±´ì„ ë²¡í„° ê²€ìƒ‰ê³¼ í•¨ê»˜ ì ìš©

### 3.1. í…Œì´ë¸” ìƒì„±

```sql
CREATE TABLE movies (
    id BIGSERIAL PRIMARY KEY,
    title TEXT,
    genre TEXT,                 -- ë©”íƒ€ë°ì´í„° 1
    release_year INT,           -- ë©”íƒ€ë°ì´í„° 2
    embedding VECTOR(768)       -- 768ì°¨ì› ë²¡í„°
);
```

### 3.2. HNSW ì¸ë±ìŠ¤ ìƒì„± (Cosine ê±°ë¦¬ ê¸°ë°˜)

```sql
CREATE INDEX idx_embedding ON movies 
USING hnsw (embedding vector_cosine_ops)
WITH (
    m = 16,                    -- ì—°ê²°ì„± (ê·¸ë˜í”„ êµ¬ì¡°)
    ef_construction = 100      -- ì¸ë±ìŠ¤ êµ¬ì¶• ì‹œ íƒìƒ‰ ê¹Šì´
);
```

### 3.3. ë©”íƒ€ë°ì´í„° í•„í„°ë§ê³¼ ë²¡í„° ê²€ìƒ‰ í†µí•© ì¿¼ë¦¬

íŠ¹ì • ì¥ë¥´(`'Sci-Fi'`)ì™€ ì¶œì‹œë…„ë„(`>= 2020`) ì¡°ê±´ì„ ê°€ì§„ ì˜í™” ì¤‘ ì„ë² ë”© ê¸°ì¤€ ê°€ì¥ ìœ ì‚¬í•œ ìƒìœ„ 5ê°œë¥¼ ê²€ìƒ‰:

```sql
-- ê²€ìƒ‰ ì‹œë§ˆë‹¤ ë™ì  ì¡°ì • ê°€ëŠ¥
-- ì‹¤ì‹œê°„ ì„œë¹„ìŠ¤: ë‚®ì€ ê°’ (20-60)
-- ë°°ì¹˜ ì²˜ë¦¬: ë†’ì€ ê°’ (100-300)
SET hnsw.ef_search = 40;       -- ê²€ìƒ‰ ì‹œ íƒìƒ‰ ê¹Šì´

SELECT id, title, genre, release_year
FROM movies
WHERE genre = 'Sci-Fi' AND release_year >= 2020
ORDER BY embedding <-> '[0.15, 0.3, 0.45, ...]'::vector
LIMIT 5;
```

### 3.4. ìµœì í™” íŒ

**ë©”íƒ€ë°ì´í„° ì¸ë±ìŠ¤ ì¶”ê°€**
```sql
CREATE INDEX idx_genre ON movies(genre);
CREATE INDEX idx_release_year ON movies(release_year);
```

**ì£¼ì˜ì‚¬í•­**
- í•„í„°ê°€ ë„ˆë¬´ ë„“ìœ¼ë©´ ì „ì²´ ê²€ìƒ‰ ì„±ëŠ¥ ì €í•˜ ë°œìƒ
- í•„í„°ê°€ ë„ˆë¬´ ì¢ìœ¼ë©´ ë²¡í„° ê²€ìƒ‰ ì •í™•ë„Â·ì¬í˜„ìœ¨ ì €í•˜ ê°€ëŠ¥
- ë²¡í„° ì¸ë±ìŠ¤ íŒŒë¼ë¯¸í„°(`m`, `ef_construction`, `ef_search`)ì™€ í•„í„° ì¸ë±ìŠ¤ë¥¼ í•¨ê»˜ ë²¤ì¹˜ë§ˆí‚¹í•˜ì—¬ ì„±ëŠ¥ íŠœë‹ í•„ìš”

### 3.5. ìƒ˜í”Œ ë°ì´í„° ì‚½ì…

```sql
-- ìƒ˜í”Œ ë°ì´í„° ì‚½ì… (ê°„ë‹¨í•œ ë²¡í„°ë¡œ ì˜ˆì‹œ)
INSERT INTO movies (title, genre, release_year, embedding) VALUES
('Inception', 'Sci-Fi', 2010, 
 '[0.1,0.2,0.3,0.4,0.5,0.1,0.2,0.3,0.4,0.5,0.1,0.2,0.3,0.4,0.5...]'::vector);
```

> ğŸ’¡ **ì‹¤ì œ í™˜ê²½ì—ì„œëŠ”:**
> - ì™„ì „í•œ 768ì°¨ì› ë²¡í„° ì‚¬ìš© (ìœ„ëŠ” ê°„ë‹¨í•œ ì˜ˆì‹œ)
> - ì‹¤ì œ í…ìŠ¤íŠ¸/ì´ë¯¸ì§€ ì„ë² ë”© ëª¨ë¸ë¡œ ìƒì„±ëœ ë²¡í„° ì‚¬ìš©
> - ì™„ì „í•œ ìƒ˜í”Œ ë°ì´í„°ëŠ” `movies_sample_data_10.sql` íŒŒì¼ ì°¸ì¡°

### 3.6. ê²€ìƒ‰ ì˜ˆì œ

```sql
-- ë²¡í„° ì°¨ì› í™•ì¸
SELECT vector_dims(embedding) as dimensions FROM movies LIMIT 1;

-- 2014ë…„ ì´í›„ Sci-Fi ì˜í™” ì¤‘ ìœ ì‚¬í•œ ì˜í™” ê²€ìƒ‰
SET hnsw.ef_search = 80;

-- Inception ì˜í™”ì™€ ìœ ì‚¬í•œ Sci-Fi ì˜í™” ì°¾ê¸° (JOIN ë°©ì‹)
SELECT m1.id, m1.title, m1.genre,
       m1.embedding <-> m2.embedding AS distance
FROM movies m1, movies m2
WHERE m1.id != m2.id 
  AND m2.title = 'Inception'
  AND m1.genre = 'Sci-Fi'
ORDER BY m1.embedding <-> m2.embedding
LIMIT 5;
```

---

## ì°¸ê³  ìë£Œ

- ì™„ì „í•œ ìƒ˜í”Œ ë°ì´í„°: `movies_sample_data_10.sql` íŒŒì¼ ì°¸ì¡°
- ì‹¤ì œ ìš´ì˜ í™˜ê²½ì—ì„œëŠ” ì™„ì „í•œ 768ì°¨ì› ë²¡í„°ì™€ ì‹¤ì œ ì„ë² ë”© ëª¨ë¸ ì‚¬ìš© í•„ìš”

